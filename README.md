# Report generator

Generate a PDF report from Markdown

## Scripts

Build report:

```
"npm run build-report"
```

Build report-preview:

```
"npm run build-report-preview"
```

Check that all findings in _notes/\*\*/findings/accepted/_ have a severity level number appended:

1. High
2. Medium
3. Low
4. Informational

```
"npm run severity-check"
```

Check that all findings in _notes/\*\*/findings/to-review/_ were moved to _notes/\*\*/findings/accepted/_

```
"npm run review-check"
```

Check that the report in report/report.html is the last version

```
"npm run build-check"
```

The HTML file will appear in the `report/` directory.

## Repository initialization checklist

- [ ] _scope.md_ finished
- [ ] Branches protected in GitLab
- [ ] "Pipelines must succeed" in GitLab
- [ ] "All discussions must be resolved" in GitLab
- [ ] Runner initialized in GitLab
- [ ] Squash commit forced
- [ ] Delete branched disabled

# Finishing the engagement

- [ ] Merge the findings into `develop`
- [ ] Update the 00_config.md file
- [ ] Generate the report
- [ ] Update the templates/report.docx file:
  - [ ] Complete the first page of the report information
  - [ ] Copy _Executive Summary/Overview_ from _01_summary.md/Overview_
  - [ ] Complete the _Key Findings_ manually
  - [ ] Copy _Scope and Rules Of Engagement_ from _01_summary.md/Scope and Rules Of Engagement_, but complete the chart directly into the word document
  - [ ] Copy _TECHNICAL ANALYSIS & FINDINGS_ from _01_summary.md/Findings summary_ and update the chart into the word document
  - [ ] Update the Findings table at page 6
  - [ ] Complete the findings from the report HTML generated by the robot
- [ ] Move the templates/report.docx into the report folder
- [ ] Send to PR, and update the document
- [ ] Generate the report PDF and store it into the report folder
- [ ] Merge with `main`

# Writing reports

Set the variables in `00_config.md`.

Write the contents of the report in the other Markdown files.

# Limitations

The pandoc filter `filters/findings_summary.py` expects that there is a section named "Technical details of security findings".

Each sub-section in the findings section must start with:

```
**Severity:** Low/Medium/High

**Status:** Remediated/Open/Other
```

Otherwise, the filter will crash. It expects those subsections to start with exactly that text, because it automatically
computes the number of high/medium/low/informational findings.

In `01_summary.md`, the variables `$findings_summary`, `$findings_table` and `$observations_table` are replaced with
actual contents by the filter.

# Acknowledgments

This robot is heavily based in the work of:

- Nils Amiet
- Nathan Hamiel
- Pelissier Sylvain
- Louis Vialar

Thanks for this excellent contribution, we appreciate the effort you made and we know that this has a huge impact in our team efficiency.
